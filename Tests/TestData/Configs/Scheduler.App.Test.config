<?xml version="1.0" encoding="utf-8"?>
<!-- Test-only Scheduler configuration. All file system paths point to the relative TestData tree that test harnesses copy next to the Scheduler binaries. -->
<configuration>
  <configSections>
    <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="RecurringIntegrationsScheduler.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <quartz>
    <add key="quartz.scheduler.instanceName" value="TestScheduler" />
    <add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz" />
    <add key="quartz.threadPool.threadCount" value="5" />
    <add key="quartz.jobStore.type" value="Quartz.Simpl.RAMJobStore, Quartz" />
    <add key="quartz.plugin.xml.type" value="Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin, Quartz.Plugins" />
    <add key="quartz.plugin.xml.fileNames" value="~/TestData/Schedules/Schedule.Standalone.xml" />
    <add key="quartz.plugin.xml.failOnFileNotFound" value="true" />
  </quartz>
  <log4net>
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="TestOutput/Scheduler.log" />
      <appendToFile value="true" />
      <maximumFileSize value="2MB" />
      <rollingStyle value="Size" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date %-5level %logger - %message%newline" />
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="RollingFileAppender" />
    </root>
  </log4net>
  <userSettings>
    <RecurringIntegrationsScheduler.Properties.Settings>
      <setting name="UploadInputFolder" serializeAs="String">
        <value>TestData/FileSystem/Upload/Input</value>
      </setting>
      <setting name="UploadSuccessFolder" serializeAs="String">
        <value>TestData/FileSystem/Upload/Working</value>
      </setting>
      <setting name="UploadErrorsFolder" serializeAs="String">
        <value>TestData/FileSystem/Upload/History</value>
      </setting>
      <setting name="DownloadErrorsFolder" serializeAs="String">
        <value>TestData/FileSystem/Download/Errors</value>
      </setting>
      <setting name="ProcessingErrorsFolder" serializeAs="String">
        <value>TestData/FileSystem/Download/Errors</value>
      </setting>
      <setting name="ProcessingSuccessFolder" serializeAs="String">
        <value>TestData/FileSystem/Export/Delivered</value>
      </setting>
      <setting name="DataJobs" serializeAs="Xml">
        <value>
          <ArrayOfDataJob xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <DataJob>
              <Name>Customers upload</Name>
              <ActivityId>aaaaaaaa-bbbb-cccc-dddd-eeeeeeee0001</ActivityId>
              <EntityName>Customers V3</EntityName>
              <Type>Upload</Type>
            </DataJob>
            <DataJob>
              <Name>Products export</Name>
              <ActivityId>aaaaaaaa-bbbb-cccc-dddd-eeeeeeee0002</ActivityId>
              <EntityName>EcoResProductV2Entity</EntityName>
              <Type>Export</Type>
            </DataJob>
          </ArrayOfDataJob>
        </value>
      </setting>
      <setting name="Instances" serializeAs="Xml">
        <value>
          <ArrayOfInstance xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <Instance>
              <Name>Contoso Test</Name>
              <AosUri>https://test.operations.dynamics.com</AosUri>
              <AzureAuthEndpoint>https://login.microsoftonline.com</AzureAuthEndpoint>
              <AadTenant>contoso.onmicrosoft.com</AadTenant>
            </Instance>
          </ArrayOfInstance>
        </value>
      </setting>
      <setting name="Users" serializeAs="Xml">
        <value>
          <ArrayOfUser xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <User>
              <Login>scheduler@test.contoso.com</Login>
              <Password>Pass@word1!</Password>
            </User>
          </ArrayOfUser>
        </value>
      </setting>
      <setting name="AadApplications" serializeAs="Xml">
        <value>
          <ArrayOfAadApplication xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <AadApplication>
              <Name>Service to Service</Name>
              <ClientId>00000000-0000-0000-0000-00000000ABCD</ClientId>
              <Secret>fake-secret</Secret>
              <AuthenticationType>Service</AuthenticationType>
            </AadApplication>
          </ArrayOfAadApplication>
        </value>
      </setting>
    </RecurringIntegrationsScheduler.Properties.Settings>
  </userSettings>
</configuration>
